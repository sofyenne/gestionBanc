<h1>indemnité lié au grade </h1>

<div class="row">
  <div class="col-md-10">
    <div class="card" >
      <div class="card-header" ><strong>Formulaire </strong>  indemnité lié au grade </div>
      <div class="card-body">
        <form class="form-horizontal" [formGroup]="formulaire">
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="corps"><strong>corps:</strong> </label>
            <div class="col-md-6">
              <ng-select [items]="corpsList"
                bindLabel="code"
                         id="corps"
                appearance="outline"
                class="form-control"
                formControlName="corps"
                style="padding: 0;"
                (change) = "getGrade($event)"
                >
              </ng-select>
              <span>{{formulaire.value.corps?.libelle}}</span>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="grade"><strong>grade:</strong> </label>
            <div class="col-md-6">
              <ng-select [items]="gradeList"
                         id="grade"
                         bindLabel="code"
                         appearance="outline"
                         class="form-control"
                         formControlName="grade"
                         style="padding: 0;"
              >
              </ng-select>
              <span>{{formulaire.value.grade?.libelle}}</span>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="subvention"><strong>indemnité:</strong> </label>
            <div class="col-md-6">
              <ng-select [items]="subventionList"
                bindLabel="code"
                         id="subvention"
                appearance="outline"
                class="form-control"
                formControlName="subvention"
                style="padding: 0;"
                >
              </ng-select>
              <span>{{formulaire.value.subvention?.libelle}}</span>

            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-3 col-form-label" for="montantSubvention"><strong>montant indemnité:</strong> </label>
            <div class="col-md-6">
              <input
                type="text"
                id="montantSubvention"
                class="form-control"
                placeholder="montantSubvention"
                formControlName="montantSubvention"
                [class.is-invalid]="montantSubvention.invalid && (montantSubvention.dirty || montantSubvention.touched)"
              />
              <small class="text-danger" *ngIf="montantSubvention.invalid && (montantSubvention.dirty || montantSubvention.touched)">
                <div *ngIf="montantSubvention.errors.required">champ requis</div>
              </small>
            </div>
          </div>
          <div class="card-footer">
            <button
              type="submit"
              class="btn btn-sm btn-primary"
              [disabled]="formulaire.invalid"
              (click)="saveForm()"
            >
              <i class="fa fa-dot-circle-o"></i> Confirmer
            </button>
            <button
              type="reset"
              class="btn btn-sm btn-danger"
              (click)="resetForm()"
            >
              <i class="fa fa-ban"></i> Ignorer
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
                          <!-- Table -->
<div class="animated fadeIn" *ngIf="source">
  <div class="row card">
      <div class="card-header col-12">
          <i class="fa fa-users"></i><span>Tableau indemnité lié au grade </span>
          <input #search
           class="ml-1"
           size="40"
           type="text"
           placeholder="Cherchez par code ou libelle"
           (input)="onSearch(search.value)"
          />
          <i class="fa fa-search ml-1"></i>
      </div>
      <div class="card-body table-responsive ">
          <ng2-smart-table
           [settings]='settings'
           [source]='source'
           (deleteConfirm)='deleteSubventionSpeciale($event)'>
          </ng2-smart-table>
      </div>
  </div>
</div>
